{% extends "base.html" %}
{% load staticfiles %}
{% load markdown_deux_tags %}

{% block content %}
<div class="container">
    <div class="row">
      <div class="col-md-6">
          <h2><span class="text-warning">In one month</span> I want to attain the following:</h1>
          <p>{{ model.title }}</p>
          <p>{{ model.body|markdown }}</p>
      </div>
    </div><!-- end div.row -->

</div><!-- end div.container -->

{% endblock content %}


{% block extra_js %}
<script type="text/javascript" src="{% static 'js/jquery-django-csrf-ajax.js' %}"></script>
<script type="text/javascript" charset="utf-8">
    $(function() {

        // Shouldn't even be necessary:
        //var userApiUrl =  

        var roleApiUrl = "{{ role_api_url }}";
        var getRole = $.get(roleApiUrl, function(data) {
            var role = data; 
            if (role.can_make_head_comment) {
                //show head comment button
            }
        });

        function someFunc2() {

            var relativeUrl = window.location.pathname;
            // This should be tested
            var challengePk = relativeUrl.match("[0-9]+");
            // For /challenge/8/detail/
            // 8

            $.ajax({
                url: "/challenge/" + challengePk + "/ajax/send-role/",
                type: "POST", 
                data: {},
                success: function(data){
                    debugger;
                    data
                },
                // Delete for production
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(xhr.responseText);
                    alert(thrownError);
                }
            });
        };






        function someFunc() {

            var relativeUrl = window.location.pathname;
            // This should be tested
            var challengePk = relativeUrl.match("[0-9]+");
            // For /challenge/8/detail/
            // 8

            $.ajax({
                url: "/challenge/" + challengePk + "/ajax/send-role/",
                type: "POST", 
                data: {},
                success: function(data){
                    debugger;
                    data
                },
                // Delete for production
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(xhr.responseText);
                    alert(thrownError);
                }
            });
        };
        //someFunc(); 
    })
</script>
{% endblock extra_js %}
